
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>e15190.neutron_wall.spectra.LabKinergyTheta &#8212; Data Analysis for E15190-E14030  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxdoc.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Data Analysis for E15190-E14030  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">e15190.neutron_wall.spectra.LabKinergyTheta</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="e15190-neutron-wall-spectra-labkinergytheta">
<h1>e15190.neutron_wall.spectra.LabKinergyTheta<a class="headerlink" href="#e15190-neutron-wall-spectra-labkinergytheta" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">e15190.neutron_wall.spectra.</span></span><span class="sig-name descname"><span class="pre">LabKinergyTheta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">runs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.__init__" title="e15190.neutron_wall.spectra.LabKinergyTheta.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(runs)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.build_rdataframe" title="e15190.neutron_wall.spectra.LabKinergyTheta.build_rdataframe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_rdataframe</span></code></a>([tree_name, implicit_mt, ...])</p></td>
<td><p>Build the RDataFrame and store it as <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.rdf</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.define_energy" title="e15190.neutron_wall.spectra.LabKinergyTheta.define_energy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">define_energy</span></code></a>([name, rdf, inplace])</p></td>
<td><p>Define the total relativistic energy of the neutron.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.define_neutron_cut" title="e15190.neutron_wall.spectra.LabKinergyTheta.define_neutron_cut"><code class="xref py py-obj docutils literal notranslate"><span class="pre">define_neutron_cut</span></code></a>([name, light_bias, ...])</p></td>
<td><p>Define the neutron cut, <code class="docutils literal notranslate"><span class="pre">cut</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.filter_charged_particles" title="e15190.neutron_wall.spectra.LabKinergyTheta.filter_charged_particles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter_charged_particles</span></code></a>([rdf, inplace])</p></td>
<td><p>Veto charged particles.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.filter_microball_multiplicity" title="e15190.neutron_wall.spectra.LabKinergyTheta.filter_microball_multiplicity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter_microball_multiplicity</span></code></a>([bhat_range, ...])</p></td>
<td><p>Filter the RDataFrame by microball multiplicity.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.filter_tdc" title="e15190.neutron_wall.spectra.LabKinergyTheta.filter_tdc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter_tdc</span></code></a>(tdc_range[, tdc_branch_name, ...])</p></td>
<td><p>Filter the RDataFrame by TDC.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.get_coincidence_peak" title="e15190.neutron_wall.spectra.LabKinergyTheta.get_coincidence_peak"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_coincidence_peak</span></code></a>([branch_name, rdf, ...])</p></td>
<td><p>Get the coincidence peak of the TDC.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#e15190.neutron_wall.spectra.LabKinergyTheta.get_spectrum" title="e15190.neutron_wall.spectra.LabKinergyTheta.get_spectrum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_spectrum</span></code></a>(theta_deg_range[, range, bins])</p></td>
<td><p>Get the lab kinetic energy spectrum at a given theta range.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Properties</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">ROOT_FILE_DIR</span></code></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">runs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.get_spectrum">
<span class="sig-name descname"><span class="pre">get_spectrum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta_deg_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.0,</span> <span class="pre">300.0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.get_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the lab kinetic energy spectrum at a given theta range.</p>
<p>Returns a histogram represented by a DataFrame with columns: x, y, yerr, yferr.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta_deg_range</strong> (<em>tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em>) – The theta range in degrees.</p></li>
<li><p><strong>range</strong> (<em>tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>default</em><em> (</em><em>0.0</em><em>, </em><em>300.0</em><em>)</em>) – The (kinetic) energy range in MeV.</p></li>
<li><p><strong>bins</strong> (<em>int</em><em>, </em><em>default 300</em>) – The number of bins.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>spectrum</strong> – DataFrame with columns ‘x’, ‘y’, ‘yerr’ and ‘yferr’.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta._drop_spectrum_outliers">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_drop_spectrum_outliers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_outliers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'y'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta._drop_spectrum_outliers" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop outliers in the dataframe.</p>
<p>This function assumes outliers only occur at the ends of the spectrum.
In other words, if a point in the middle is an outlier, it will not be
dropped. This decision is made to keep the resulting spectrum
continuous. Empirically, for this purpose, if an outlier happens in the
middle, it is likely that there is some problem with the data anyway.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – The dataframe to drop outliers from. Must have a column named defined by
<cite>yname</cite>.</p></li>
<li><p><strong>drop_outliers</strong> (<em>float</em>) – Outliers are defined as points whose ratio to the neighboring point is
larger than <cite>drop_outliers</cite>.</p></li>
<li><p><strong>yname</strong> (<em>str</em><em>, </em><em>default 'y'</em>) – The name of the column in <cite>df</cite> that contains the values to check for
outliers.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>df</strong> – The dataframe with outliers dropped.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta._infer_reaction">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_infer_reaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">runs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'target'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'beam'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'beam_energy'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta._infer_reaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Infer the reaction from the runs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>runs</strong> (<em>list</em><em>[</em><em>int</em><em>]</em>) – A list of runs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>reaction</strong> – A dictionary containing the reaction information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[Literal[‘target’, ‘beam’, ‘beam_energy’], str | float]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the runs are not from the same reaction.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta._infer_shadow_bar_present">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_infer_shadow_bar_present</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">runs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta._infer_shadow_bar_present" title="Permalink to this definition">¶</a></dt>
<dd><p>Infer whether the shadow bar is present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>runs</strong> (<em>list</em><em>[</em><em>int</em><em>]</em>) – A list of runs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>presence</strong> – True if the shadow bar is present for all runs, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the runs have different shadow bar presence.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.build_rdataframe">
<span class="sig-name descname"><span class="pre">build_rdataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tree_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">implicit_mt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">cppyy.gbl.ROOT.RDataFrame</span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.build_rdataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the RDataFrame and store it as <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.rdf</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tree_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the tree, by default None. If None, the tree name will be
inferred from the root file paths.</p></li>
<li><p><strong>implicit_mt</strong> (<em>bool</em><em>, </em><em>default True</em>) – Whether to enable implicit multi-threading.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>default False</em>) – Whether to build the RDataFrame in place.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.define_energy">
<span class="sig-name descname"><span class="pre">define_energy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'energy'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rdf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.define_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the total relativistic energy of the neutron.</p>
<p>This function will define a new column <code class="docutils literal notranslate"><span class="pre">energy</span></code> in the RDataFrame. It
first computes the relativistic beta using time-of-flight and distance
between the target and the hit position on NWB. Then it calculates the
total energy assuming a mass of neutron. If charged particles and gamma
rays have not been excluded, the energies for those hits will be off
because they are not neutrons.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>default 'energy'</em>) – Name of the new column. The values will be in MeV.</p></li>
<li><p><strong>rdf</strong> (<em>ROOT.RDataFrame</em><em>, </em><em>optional</em>) – The RDataFrame to be filtered. If None, the RDataFrame stored in
<code class="xref py py-attr docutils literal notranslate"><span class="pre">self.rdf</span></code> will be used.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>default False</em>) – Whether to apply the definition in place.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rdf</strong> – The RDataFrame with the new column. If <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code>, returns
None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ROOT.RDataFrame or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.define_neutron_cut">
<span class="sig-name descname"><span class="pre">define_neutron_cut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cut'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">light_bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_adc_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_cuts</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rdf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.define_neutron_cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the neutron cut, <code class="docutils literal notranslate"><span class="pre">cut</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>default 'cut'</em>) – Name of the new column.</p></li>
<li><p><strong>light_bias</strong> (<em>float</em><em>, </em><em>default 3.0</em>) – The light output bias in MeVee.</p></li>
<li><p><strong>position_cut</strong> (<em>bool</em><em>, </em><em>default True</em>) – Whether to apply the position cut. Shadow bar cuts are applied
automatically if shadow bars are present in those runs. See <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.shadow_bar_present</span></code>.</p></li>
<li><p><strong>positive_adc_cut</strong> (<em>bool</em><em>, </em><em>default True</em>) – Whether to apply the positive ADC cut. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all the fast and
total ADCs must be positive.</p></li>
<li><p><strong>extra_cuts</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Extra cuts to be applied. Each cut should be a string that can be
parsed by PyROOT. Any columns that are defined in the RDF can be
used in the cut. The cuts will be joined by <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p></li>
<li><p><strong>rdf</strong> (<em>ROOT.RDataFrame</em><em>, </em><em>optional</em>) – The RDataFrame to be filtered. If None, the RDataFrame stored in</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>default False</em>) – Whether to apply the cut in place.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.filter_charged_particles">
<span class="sig-name descname"><span class="pre">filter_charged_particles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rdf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.filter_charged_particles" title="Permalink to this definition">¶</a></dt>
<dd><p>Veto charged particles.</p>
<p>This function will filter out charged particles by requiring the
multiplicity of veto wall to be 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rdf</strong> (<em>ROOT.RDataFrame</em><em>, </em><em>optional</em>) – The RDataFrame to be filtered. If None, the RDataFrame stored in
<code class="xref py py-attr docutils literal notranslate"><span class="pre">self.rdf</span></code> will be used.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>default False</em>) – Whether to apply the filter in place.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rdf</strong> – The filtered RDataFrame. If <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code>, returns None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ROOT.RDataFrame or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.filter_microball_multiplicity">
<span class="sig-name descname"><span class="pre">filter_microball_multiplicity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bhat_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.filter_microball_multiplicity" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the RDataFrame by microball multiplicity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bhat_range</strong> (<em>tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>, </em><em>optional</em>) – The range of normalized impact parameter, e.g. (0.0, 0.4). If this
is not provided, <code class="docutils literal notranslate"><span class="pre">multi_range</span></code> must be provided.</p></li>
<li><p><strong>multi_range</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>optional</em>) – The inclusive range of microball multiplicity, e.g. (14, 30). If
<code class="docutils literal notranslate"><span class="pre">bhat_range</span></code> is provided, this will be ignored.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>default False</em>) – Whether to apply the filter in place.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rdf</strong> – The filtered RDataFrame. If <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code>, returns None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ROOT.RDataFrame or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.filter_tdc">
<span class="sig-name descname"><span class="pre">filter_tdc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdc_range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tdc_branch_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'TDC_mb_nw'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rdf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">cppyy.gbl.ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.filter_tdc" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the RDataFrame by TDC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdc_range</strong> (<em>tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em>) – The range of TDC.</p></li>
<li><p><strong>rdf</strong> (<em>ROOT.RDataFrame</em><em>, </em><em>optional</em>) – The RDataFrame to be filtered. If None, the RDataFrame stored in
<code class="xref py py-attr docutils literal notranslate"><span class="pre">self.rdf</span></code> will be used.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em><em>, </em><em>default False</em>) – Whether to apply the filter in place.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rdf</strong> – The filtered RDataFrame. If <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code>, returns None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ROOT.RDataFrame or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="e15190.neutron_wall.spectra.LabKinergyTheta.get_coincidence_peak">
<span class="sig-name descname"><span class="pre">get_coincidence_peak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'TDC_mb_nw'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rdf</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ROOT.RDataFrame</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_histogram</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'stdev'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">ROOT.TH1</span></span></span><a class="headerlink" href="#e15190.neutron_wall.spectra.LabKinergyTheta.get_coincidence_peak" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the coincidence peak of the TDC.</p>
<p>You may want to apply the microball multiplicity filter before calling
this function.</p>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Data Analysis for E15190-E14030  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">e15190.neutron_wall.spectra.LabKinergyTheta</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018-2023, MSU/FRIB HiRA group.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>